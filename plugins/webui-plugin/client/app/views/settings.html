<div foobar></div>
<div class="settings-nav col-sm-3 hidden-xs" full-height>
    <ul>
        <li ng-class="{active: tab == t.id}" ng-repeat="t in tabs">
            <a ng-click="setTab(t.id)">{{t.name}}</a>
        </li>
    </ul>

</div>

<div class="settings-content container-fluid">
    <div class="row" ng-show="tab == 'repo'">
        <div class="col-xs-12">
            <h1>Repositories</h1>

            <div class="settings-ctrl">
                <div class="btn-group">
                    <button class="btn btn-primary" data-toggle="modal" data-target="#edit-directory"
                            ng-click="setNewDirectory()">
                        <i class="glyphicon glyphicon-plus"></i> New repository
                    </button>
                    <button class="btn btn-default" ng-click="refreshDirectories()">
                        <i class="glyphicon glyphicon-refresh"></i> Refresh all
                    </button>
                </div>
            </div>
            <table class="table table-striped table-bordered table-bordered table-hover table-condensed">
                <tr>
                    <th class="icons"></th>
                    <th>Name</th>
                    <th class="hidden-xs">Refreshed</th>
                    <th><span class="hidden-xs">Type</span></th>
                    <th>Lang</th>
                </tr>
                <tbody>
                <tr ng-repeat="d in directories | orderBy:'name'">
                    <td class="icons">
                        <i class="glyphicon glyphicon-edit link" ng-click="setDirectory(d)" data-toggle="modal"
                           data-target="#edit-directory"></i> <i class="glyphicon glyphicon-remove link"
                                                                 ng-click="setToDelete(d)" data-toggle="modal"
                                                                 data-target="#delete-directory"></i> <i
                            class="glyphicon glyphicon-refresh link" ng-click="refreshDirectories(d.name)"></i> <i
                            class="glyphicon glyphicon-eject link" ng-click="ejectDirectory(d)" ng-show="d.remote"
                            ng-class="{success:d.online, danger:!d.online}"></i>
                    </td>
                    <td>
                        <span class="pull-right badge" ng-show="d.size">{{d.size}}</span> {{d.name}}
                    </td>
                    <td class="hidden-xs">{{d.lastRefresh | date:'dd/MM/yyyy HH:mm'}}</td>
                    <td><span ng-bind-html="d.mediaType | mediaType:types"></span></td>
                    <td>{{d.lang}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" ng-show="tab == 'favorite'">
        <div class="col-xs-12"><h1>Favorites</h1></div>
    </div>
    <div class="row" id="favorite" ng-show="tab == 'favorite'">
        <div class="col-sm-6">
            <table class="table">
                <tr ng-repeat="f in favorites |orderBy:'name'">
                    <td><i class="glyphicon glyphicon-remove link" ng-click="deleteFavorite(f)"></i></td>
                    <td ng-show="editedFavorite != f" ng-click="setEditedFavorite(f)" class="link">{{f.name}}</td>
                    <td ng-show="editedFavorite == f">
                        <form class="input-group" ng-submit="updateFavorite(f)">
                            <input type="text" class="form-control" ng-model="f.name"/>
                            <span class="input-group-btn">
                                <button type="submit" class="btn btn-default"><i
                                        class="glyphicon glyphicon-ok-sign"></i></button>
                                <span class="btn btn-default" ng-click="cancelFavorite(f)"><i
                                        class="glyphicon glyphicon-remove-sign"></i></span>
                            </span>
                        </form>
                    </td>
                    <td class="favorite-path">{{f.path}}</td>
                </tr>
            </table>
        </div>
        <div class="col-sm-6">
            <file-tree roots="[]" indication="Select path you want to add to favorites" call-back="addFavorite"
                       small="true"></file-tree>
        </div>
    </div>

    <div class="row" ng-show="tab == 'param'">
        <div class="visible-xs">
            <h1>Parameters</h1>
        </div>
        <div class="parameter-list" full-height>
            <ul class="nav nav-pills nav-stacked">
                <li ng-repeat="set in fieldSets |orderBy:'configId'" ng-click="selectFieldSet(set)"
                    ng-class="{active: activeFieldSet == set}">
                    <a>{{set.name}} <span class="fieldset-id">{{set.configId}}</span></a>
                </li>
            </ul>

        </div>
        <div class="parameter-content">
            <h1 class="hidden-xs">Parameters</h1>

            <form class="form" ng-submit="updateFiledSet(activeFieldSet)">

                <div class="form-group" ng-repeat="f in activeFieldSet.fields | orderBy:'name'">
                    <label>{{f.name}}</label> <span class="field-key"> - {{f.key}}</span>
                    <input type="text" class="form-control" ng-model="f.value" ng-disabled="{{f.staticField}}">
                    <p class="help-block" ng-show="f.description">{{f.description}}</p>
                </div>

                <button type="submit" class="btn btn-primary">Update</button>
            </form>
        </div>
    </div>
</div>

<!-- MODAL WINDOW -->
<div id="edit-directory" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3>{{directory.name}}</h3>
            </div>
            <div class="modal-body container-fluid">
                <form class="form-inline" role="form">
                    <div class="form-group pull-right type-group">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                <span ng-bind-html="directory.mediaType | mediaType:types"></span> <span
                                    class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li ng-repeat="t in types" ng-click="directory.mediaType = t.value" class="link">
                                    <i ng-class="getIconClass(t.icon)"></i> {{t.name}}
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="form-group name-group">
                        <input type="text" class="form-control" id="name" placeholder="Name" ng-model="directory.name"
                               placeholder="Name"/>
                    </div>
                    <div class="form-group lang-group">
                        <label for="lang" class="control-label hidden-xs">Lang: </label> <input type="text"
                                                                                                class="form-control"
                                                                                                id="lang"
                                                                                                placeholder="Lang"
                                                                                                ng-model="directory.lang"/>
                    </div>
                </form>

                <div class="clearfix"></div>

                <h4>
                    <button class="btn btn-success pull-right" ng-click="showPaths()"><i
                            class="glyphicon glyphicon-plus"></i></button>
                    Paths
                </h4>
                <table class="table">
                    <tbody>
                    <tr ng-repeat="p in directory.paths">
                        <td class="icons"><i class="glyphicon glyphicon-remove link"
                                             ng-click="removePath(directory, p)"></i></td>
                        <td>{{p}}</td>
                    </tr>
                    <tr class="text-center" ng-show="!directory.paths || directory.paths.length == 0">
                        <td colspan="2">No paths selected</td>
                    </tr>
                    </tbody>
                </table>
                <div ng-show="showTree">
                    <file-tree roots="treePaths" indication="Select paths you want to add"
                               call-back="addPath"></file-tree>
                </div>
                <div class="row">
                    <div class="col-xs-10 col-sm-push-1">
                        <label class="link"><input type="checkbox" ng-model="directory.remote"> Remote
                            repository</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" ng-click="saveUpdate()" data-dismiss="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal to delete selected directory -->
<div id="delete-directory" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                <h4 class="modal-title">Delete {{toDelete.name}}?</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete directory '{{toDelete.name}}' with its {{toDelete.size}}
                    media(s)?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteRepository(toDelete)">
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>

<!-- TODO List Directories and files
X Add remote & online on directories
- should be able to find media only local or remote online (not offline)
- Add options 'Delete - Mark as delete' and 'Copy on/delete from local' on movies
- Add 'Favorite (files)' and 'Deletion page' in settings -> multi select for favorites, 'Delete all' in red for deletion
- Add 'local' in VideoFile with the same video, on local -> don't appear twice everywhere
- Add 'isRemote' field to media files => means it's on remote repository, save this field when scanning
- Add 'Files' in primary nav bar - list only favorite folders, offer 'copy to repository' and 'play' actions
-->