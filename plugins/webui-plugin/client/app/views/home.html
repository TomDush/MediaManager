<div class="jumbotron">
    <div class="container">
        <div class="row hidden-xs">
            <h1 class="col-xs-6">Medima</h1>

            <div class="col-xs-5 col-xs-offset-1">
                <ul class="unstyled">
                    <li ng-repeat="e in menu"><a ng-href="{{e.href}}">
                        <i ng-class="icon(e.icon)"/> {{e.name}}</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <!-- TODO Use LESS to control how many poster are visible, depending on viewport size (and restore 15px margin)-->
    <!-- Create mock extractor? (groovy) -->
    <div class="row hidden-xs" style="margin-left: 15px; margin-right: 15px;">
        <div style="width: 10%; overflow: hidden" class="pull-left"
             ng-repeat="m in random.elements | filter:{poster:'!!'} |limitTo:9">
            <a ui-sref="sheet.movie({movieId : m.id})" title="{{m.title}} ({{m.release |date:'yyyy'}})">
                <img style="width: 100%" alt="{{m.title}}" ng-src="{{m.poster}}?size=THUMBS"
                     err-src="/img/no-poster-w185.jpg"/>
            </a>
        </div>
        <div style="width: 10%;" class="text-center pull-left">
        <span ng-click="refreshRandom()" class="btn btn-default" style="margin-top: 30px">
            <i class="glyphicon glyphicon-refresh"></i> Refresh
        </span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4" ng-show="inProgress.length">
            <h2>In Progress</h2>

            <div ng-repeat="recovery in inProgress" class="media">
                <a ui-sref="sheet.movie({movieId : recovery.mediaSummary.id})" class="media-icon pull-left">
                    <poster url="{{recovery.mediaSummary.poster}}" size="MINI"/>
                </a>

                <div class="media-body">
                    <a class="pull-right btn btn-info btn-sm" ng-click="resume(recovery)"><i
                            class="glyphicon glyphicon-play icon-white"></i> </a>
                    <h4 class="media-heading" ui-sref="sheet.movie({movieId : recovery.mediaSummary.id})">
                        <mediatitle media="recovery.mediaSummary"/>
                    </h4>

                    <div class="span6">
                        <timeprogressbar status="recovery"/>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-4" ng-show="lastMovies.elements.length">
            <h2>Last {{lastMovies.elements.length}} unseen movies</h2>

            <ul>
                <li ng-repeat="m in lastMovies.elements">
                    <a ui-sref="sheet.movie({movieId : m.id})" title="{{m.title}}">{{m.title}} ({{m.release
                        |date:'yyyy'}})</a>
                    <!-- TODO Display more information on "title" (small popup) -->
                </li>
            </ul>
            <p><a ui-sref="medias.list({type : ['movies'], order:'last', seen: false})">{{lastMovies.size}} movie(s)
                recently added.</a></p>
        </div>
    </div>
</div>
