<div id="movies" class="container-fluid">
    <div class="row">
        <div class="col-sm-11 col-sm-push-1">
            <!-- Display type -->
            <div class="btn-group display-type">
                <button type="button" class="btn btn-default" ng-click="display = 'icon'"
                        ng-class="{active: display == 'icon'}">
                    <i class="glyphicon glyphicon-th"></i>
                </button>
                <button type="button" class="btn btn-default" ng-click="display = 'list'"
                        ng-class="{active: display == 'list'}">
                    <i class="glyphicon glyphicon-th-list"></i>
                </button>
            </div>
            <div class="display-type visible-xs">
                <button class="btn btn-default" ng-click="filterCollapsed = !filterCollapsed">
                    Filter <span class="caret"></span>
                </button>
            </div>
            <!-- Order managing -->
            <sort filter="filter" on-change="applyFilter" class="display-type hidden-xs"></sort>
            <h1>Movies</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4 search-form" collapse="filterCollapsed">
            <div class="text-center">
                <div class="btn-group">
                    <button type="button" class="btn btn-default" ng-class="{active: filterIs(all)}"
                            ng-click="selectFilter(all)">All
                    </button>
                    <button type="button" class="btn btn-default" ng-class="{active: filterIs(latest)}"
                            ng-click="selectFilter(latest)">Latest
                    </button>
                    <button type="button" class="btn btn-default" ng-class="{active: filterIs(unidentified)}"
                            ng-click="selectFilter(unidentified)">
                        Unidentified
                    </button>
                </div>
            </div>

            <form class="form" ng-submit="applyFilter()">
                <div class="form-group visible-xs">
                    <label>Order by:</label>
                    <sort filter="filter"></sort>
                </div>

                <div class="form-group">
                <input type="text" class="form-control" ng-model="filter.search" placeholder="Title, actor, ...">
                </div>

                <div class="form-group seen-radio">
                    <label class="radio-inline"> <input type="radio" ng-model="filter.seen" value="UNSEEN"> New </label>
                    <label class="radio-inline"> <input type="radio" ng-model="filter.seen" value="SEEN"> Viewed
                    </label> <label class="radio-inline"> <input type="radio" ng-model="filter.seen" value="ALL"> Both
                </label>
                </div>

                <div class="container-fluid">
                    <div class="genre-checkbox col-sm-6" ng-repeat="g in genres | orderBy:'toString()'">
                        <div class="checkbox">
                            <label> <input type="checkbox" ng-model="selectedGenres[g]" ng-click="refreshFilter()"/>
                                {{g}} </label>
                        </div>
                    </div>

                    <div class="check-control">
                        <i ng-click="selectAllGenres()" class="glyphicon glyphicon-check" title="Select all"></i> <i
                            ng-click="clearGenres()" class="glyphicon glyphicon-remove-circle" title="Deselect all"></i>
                        <i ng-click="inverseGenres()" class="glyphicon glyphicon-adjust" title="Inverse selection"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label>Select only</label>
                    <select class="form-control" ng-model="filter.enriched">
                        <option value="ALL">Both - Enriched and Not enriched</option>
                        <option value="ENRICHED">Enriched</option>
                        <option value="NOT_ENRICHED">Not enriched</option>
                    </select>
                </div>

                <div class="text-center buttons">
                    <button type="submit" class="btn btn-primary">Filter</button>
                </div>
            </form>
        </div>
        <div class="col-sm-8">
            <div>
                <div ng-show="!movies.content || movies.content.length == 0">
                    <i class="glyphicon glyphicon-info-sign"></i> No movie to show, check filter or <a
                        href="/settings/repo">configure repositories</a>.
                </div>


                <div ng-show="movies.totalPages > 1">
                    <pager ng-model="filter.page" total-items="movies.totalElements" items-per-page="movies.size"
                           ng-change="applyFilter()" align="false"></pager>
                </div>
                <div ng-show="display == 'icon' && movies.content.length > 0" class="container-fluid">
                    <div class="row">
                        <div class="media movie-icon link" ng-repeat="movie in movies.content"
                             ng-class="{'active': selected == movie, 'last-in-row': isLast($index)}">
                            <div class="details">
                                <i class="close-cross" ng-click="setSelected(null)"></i>
                                <h4>{{movie | mediatitle}}</h4>
                                <tags media="movie" vote="true"></tags>
                                <p class="tagline">{{movie.tagline}}</p>

                                <div class="buttons">
                                    <a class="btn btn-sm btn-default" href="/movies/{{movie.id}}"><i
                                            class="glyphicon glyphicon-info-sign"></i>
                                        Detail</a>
                                    <play-button media="movie" btn-size="sm"></play-button>
                                </div>
                            </div>
                            <poster url="movie.poster" ng-show="movie.poster" ng-click="setSelected(movie)"></poster>
                            <div class="caption" ng-hide="movie.poster">
                                <h4>{{movie.title}}</h4>

                                <div class="buttons">
                                    <button class="btn btn-sm btn-default"><i class="glyphicon glyphicon-barcode"></i>
                                        Identify
                                    </button>
                                    <a class="btn btn-sm btn-default" href="/movies/{{movie.id}}"><i
                                            class="glyphicon glyphicon-info-sign"></i>
                                        Detail</a>
                                    <play-button media="movie" btn-size="sm"></play-button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div ng-show="display == 'list' && movies.content.length > 0">
                    <div ng-repeat="movie in movies.content" class="media">
                        <a class="pull-left">
                            <poster url="movie.poster" size="MINI" class="media-object"/>
                        </a>

                        <div class="media-body">
                            <span class="pull-right" ng-show="movie.voteAverage && movie.voteAverage > 0">{{movie.voteAverage |rate}}</span>
                            <h4 class="media-heading">
                                <a href="/movies/{{movie.id}}">
                                    <span class="btn btn-success btn-xs" ng-show="! movie.seen">NEW</span> {{movie |
                                    mediatitle}}</a></h4>


                            <play-button media="movie" btn-size="sm" class="pull-right"></play-button>

                            <tags media="movie"></tags>
                            <p class="tagline">{{movie.tagline}}</p>
                        </div>
                    </div>
                </div>

                <div class="text-center" ng-show="movies.totalPages > 1">
                    <pagination ng-model="filter.page" total-items="movies.totalElements" items-per-page="movies.size"
                                ng-change="applyFilter()" max-size="paginationSize" boundary-links="true"
                                direction-links="false"></pagination>
                </div>

                <div ng-show="display != 'list' && display != 'icon'">
                    Display is: {{display}}
                </div>
            </div>
        </div>
    </div>
</div>
